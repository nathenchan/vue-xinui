<template>
	<div id="svg-demo-page">
		<div class="demo-pages">
			<h3>描边动画</h3>
			<div class="show-page">
				<div class="demo-btn-page">
					<svg id="sign-name" width="250" height="60" fill="none" stroke="#212b4d">
						<g>
							<path d="M23.71,7.51a17,17,0,0,0-6.86-1.13,31.78,31.78,0,0,0-5.76.48,40.17,40.17,0,0,0-4.83,1.3A32.79,32.79,0,0,0,1.82,10C.61,10.58,0,11.1,0,11.52a1.24,1.24,0,0,0,.29.82.86.86,0,0,0,.67.33,2,2,0,0,0,.84-.29c.37-.19.74-.4,1.13-.62.86-.51,1.53-.88,2-1.1A49.54,49.54,0,0,1,10.18,9c0,.32,0,.92,0,1.8s-.05,1.83-.05,2.85q0,1.83.14,6.15.3,8.53.29,12.28a14.83,14.83,0,0,0,.12,2.16c.08.52.12.8.12.87.13.67.43,1,.91,1a1.93,1.93,0,0,0,1.11-.36,1.07,1.07,0,0,0,.53-.89A4.42,4.42,0,0,0,13,33.77a6.61,6.61,0,0,1-.31-2.19q0-4.12-.24-10c.32-.1,1-.34,2-.72s2-.8,3-1.25a24.69,24.69,0,0,0,6.43-3.86,6.3,6.3,0,0,0,2.31-4.87A3.62,3.62,0,0,0,23.71,7.51ZM21.84,14.9A24.46,24.46,0,0,1,16.51,18a19.76,19.76,0,0,1-4.27,1.44c0-1.18,0-2.16-.05-2.93l0-3.5c0-.83,0-1.71.08-2.64s.08-1.52.12-1.78a36.68,36.68,0,0,1,4.51-.29A16.59,16.59,0,0,1,21.94,9c1.37.44,2.06,1.21,2.06,2.3A4.71,4.71,0,0,1,21.84,14.9Z" />
							<path d="M45.36,28.51a12.77,12.77,0,0,1-3.94,4.2,10,10,0,0,1-5.8,1.75,6,6,0,0,1-4.76-1.77,6.55,6.55,0,0,1-1.53-4.42,24.68,24.68,0,0,1,.84-5.71,23.92,23.92,0,0,1,2.37-6.1c.07-.12.33-.6.8-1.41a5.82,5.82,0,0,1,1.56-1.87,2.92,2.92,0,0,1,1.82-.65,1.53,1.53,0,0,1,.79.21.65.65,0,0,1,.36.56,1.4,1.4,0,0,1-.26.45c-.18.24-.31.43-.41.55a22.68,22.68,0,0,0-2.64,3.89A26.2,26.2,0,0,0,32.47,23a17.77,17.77,0,0,0-.74,5.23c0,2.53,1.53,3.79,4.61,3.79a7,7,0,0,0,4-1.24,10,10,0,0,0,3-3.05,6.47,6.47,0,0,0,1.1-3.29,4.3,4.3,0,0,0-1.1-2.93,19.18,19.18,0,0,0-3-2.64,15.69,15.69,0,0,1-1.82-1.49,1.53,1.53,0,0,1-.58-1c0-.38.27-.69.82-.93a4.7,4.7,0,0,1,1.92-.36,2.76,2.76,0,0,1,.81.07.27.27,0,0,1,.2.26.7.7,0,0,1-.17.32.64.64,0,0,0-.17.36q0,.13,1,1a21.7,21.7,0,0,1,3.22,3.21,6,6,0,0,1,1.29,3.84A9,9,0,0,1,45.36,28.51Z"/>
							<path d="M71.83,14.86a1.76,1.76,0,0,1-1.22.74,1.43,1.43,0,0,1-.87-.41c-.32-.27-.54-.41-.67-.41-.86,0-2.24.6-4.13,1.78a60.34,60.34,0,0,0-5.8,4.18,45.71,45.71,0,0,0-4.56,4.08l0,.86c2.44,1.12,5.14,2.32,8.12,3.6a37.83,37.83,0,0,0,6.19,2.26c.45.06.89.11,1.34.14l1,.05a3.68,3.68,0,0,1,.72.05c.19,0,.29.09.29.19,0,.38-.3.77-.89,1.15a5,5,0,0,1-2.66.58,11.79,11.79,0,0,1-4.3-1.18c-1.81-.78-3.94-1.82-6.41-3.1l-3-1.48c.42,4.06.62,6.3.62,6.72a1,1,0,0,1-.52.86,2.18,2.18,0,0,1-1.16.34c-.25,0-.46-.39-.62-1.16s-.35-2.28-.58-4.56l-.33-2.92a3,3,0,0,1-1-.7,1.26,1.26,0,0,1-.43-.84c0-.38.32-.83,1-1.34q0-2.6-.27-7.4t-.31-7l-.24-6.68A6.84,6.84,0,0,1,51.41,1,1.41,1.41,0,0,1,52.9,0a.74.74,0,0,1,.57.17,1,1,0,0,1,.15.65q0,2.21.31,10.24c.21,5.36.37,9.18.5,11.45Q65.14,12.34,70.08,12.34a3.65,3.65,0,0,1,1.7.36c.47.24.7.48.7.74A2.24,2.24,0,0,1,71.83,14.86Z"/>
							<path d="M92,21.89c-.13,0-.28.18-.44.55s-.27.62-.33.74a25.35,25.35,0,0,1-3.84,6,7.6,7.6,0,0,1-6,2.64,4.72,4.72,0,0,1-3.77-1.54,6.41,6.41,0,0,1-1.32-4.32,16.79,16.79,0,0,1,.58-4.32,30.1,30.1,0,0,0,6.24-1.73,18.32,18.32,0,0,0,4.92-2.78A4.4,4.4,0,0,0,90,13.82a2.57,2.57,0,0,0-1.22-2.28,5.49,5.49,0,0,0-3-.79A8.9,8.9,0,0,0,80,13.08a17.14,17.14,0,0,0-4.51,6,17.16,17.16,0,0,0-1.73,7.42q0,4,2.06,5.9a7.27,7.27,0,0,0,5.14,1.92,8.69,8.69,0,0,0,6.31-2.5,17.07,17.07,0,0,0,3.84-5.42,13.3,13.3,0,0,0,1.27-3.79Q92.35,21.89,92,21.89ZM78.84,16.8a11.14,11.14,0,0,1,2.81-2.88,6,6,0,0,1,3.5-1.2,3.8,3.8,0,0,1,1.85.43,1.32,1.32,0,0,1,.79,1.2c0,.51-.55,1.17-1.65,2A20.11,20.11,0,0,1,82,18.53a17.19,17.19,0,0,1-4.65,1.25A10,10,0,0,1,78.84,16.8Z"/>
							<path d="M112,14.9a1.7,1.7,0,0,1-1,.56.94.94,0,0,1-.64-.29,5.83,5.83,0,0,1-.7-.82,2.79,2.79,0,0,0-.89-.81,2.09,2.09,0,0,0-1.13-.34q-1.38,0-3.74,3.67a57.43,57.43,0,0,0-4.61,9.24c0,.74.09,1.67.17,2.79s.14,2,.17,2.49l.14,1.92a2.27,2.27,0,0,1-.29,1.18,1.11,1.11,0,0,1-1,.5c-.55,0-.9-.73-1.06-2.18s-.25-3.58-.29-6.36c0-.71,0-1.71-.07-3s0-2.88-.12-4.7q-.14-4.12-.14-5.9c0-.74.45-1.11,1.34-1.11a.89.89,0,0,1,1,.7,13.92,13.92,0,0,1,.16,2.66V22.7a38.34,38.34,0,0,1,3.12-6.38,18.6,18.6,0,0,1,3.29-4.1,4.61,4.61,0,0,1,2.86-1.42A4.66,4.66,0,0,1,112,12.5a2.34,2.34,0,0,1,.58,1.42A1.46,1.46,0,0,1,112,14.9Z"/>
							<path d="M146.11,5.59a1.07,1.07,0,0,1-.86.41,6.41,6.41,0,0,1-1-.26,5.12,5.12,0,0,0-1.56-.27c-1.53,0-3.28.08-5.23.24a37.62,37.62,0,0,0-4.85.67c.1,1.54.19,4,.27,7.28s.12,6.79.12,10.44c0,1.53,0,3.24-.08,5.13a27.52,27.52,0,0,1-.21,3.51,1.28,1.28,0,0,1-.65.86,2.18,2.18,0,0,1-1.13.34.73.73,0,0,1-.57-.29,1,1,0,0,1-.24-.67l0-1.68c.2-2.5.29-5.57.29-9.22q0-3.93-.09-9c-.07-3.38-.13-5.46-.2-6.26a96.6,96.6,0,0,0-12.81,2,4.08,4.08,0,0,1-1.3.2,2.75,2.75,0,0,1-1.68-.63A1.72,1.72,0,0,1,113.57,7a.83.83,0,0,1,.28-.7,1.22,1.22,0,0,1,.72-.21c1.83-.1,3.36-.2,4.61-.29q4.27-.39,10.75-1.2A19.8,19.8,0,0,1,130,2.5c0-.42.15-.63.31-.63a2.24,2.24,0,0,1,1.63.72,1.52,1.52,0,0,1,.24.75,7.7,7.7,0,0,1,.1.79,29.11,29.11,0,0,0,3.45-.48,54.49,54.49,0,0,1,7.11-.82,5.52,5.52,0,0,1,3.07.58,1.61,1.61,0,0,1,.53,1.39A1.27,1.27,0,0,1,146.11,5.59Z"/>
							<path d="M153,4.8h-1.58a2.65,2.65,0,0,1-1.66-.67q-.84-.67-.84-1.11a1.38,1.38,0,0,1,.51-1,1.49,1.49,0,0,1,1-.48,2.78,2.78,0,0,1,1.2.76,13.25,13.25,0,0,1,.86,1,2.35,2.35,0,0,1,.48.77Z"/>
							<path d="M153.81,35a1.46,1.46,0,0,1-.93.21q-.67,0-1-2.16c-.2-1.41-.42-4.08-.64-8-.13-2.6-.24-5.13-.34-7.61s-.16-4.39-.19-5.74a1.43,1.43,0,0,1,.17-.79.68.68,0,0,1,.64-.26,1.3,1.3,0,0,1,1.4.91,14,14,0,0,1,.28,3.5l0,5.67q0,4.85.28,7.77c0,.1.15,1.12.44,3.07a21.07,21.07,0,0,1,.33,2.69A.84.84,0,0,1,153.81,35Z"/>
							<path d="M190.22,34.63a1.33,1.33,0,0,1-1,.41.76.76,0,0,1-.86-.86,131.58,131.58,0,0,0-.63-14.86q-.61-5.16-2.16-5.16-2.58,0-7.58,18.1v0a1.41,1.41,0,0,1-.38,1,1.35,1.35,0,0,1-1,.41.77.77,0,0,1-.87-.87q0-1.92.2-5.95c.12-3,.19-5.38.19-7.1a40.11,40.11,0,0,0-.22-5.12c-.14-1-.45-1.51-.93-1.51q-1.64,0-4.13,6T165.6,33.22l-.44,1.24a2.12,2.12,0,0,1-.55.82,1.15,1.15,0,0,1-.79.34,2.09,2.09,0,0,1-.77-.1c-.13-.06-.21-.26-.24-.58-.16-1.56-.29-3.66-.38-6.28-.07-.68-.13-1.78-.19-3.32-.32-5.4-.61-9.06-.87-11s-.38-3-.38-3.2a1.69,1.69,0,0,1,.38-.91c.26-.35.5-.53.72-.53.51,0,.93.37,1.25,1.11a22.38,22.38,0,0,1,.53,4.22c.19,2.47.35,5.52.48,9.17l.24,7.34q2.64-8.16,5.47-14.8c1.89-4.44,3.62-6.65,5.18-6.65,1.06,0,1.78.77,2.16,2.3A28.9,28.9,0,0,1,178,19.1q0,2.31-.1,6.63l0,2.21a105.11,105.11,0,0,1,3.91-11.52c1.29-3.11,2.6-4.66,3.91-4.66q5,0,4.94,21.89A1.36,1.36,0,0,1,190.22,34.63Z"/>
							<path d="M214.41,21.89c-.13,0-.27.18-.43.55s-.27.62-.33.74a25.07,25.07,0,0,1-3.85,6,7.57,7.57,0,0,1-6,2.64A4.7,4.7,0,0,1,200,30.24a6.41,6.41,0,0,1-1.32-4.32,17.22,17.22,0,0,1,.57-4.32,29.76,29.76,0,0,0,6.24-1.73,18,18,0,0,0,4.92-2.78,4.39,4.39,0,0,0,1.9-3.27,2.56,2.56,0,0,0-1.23-2.28,5.45,5.45,0,0,0-3-.79,8.94,8.94,0,0,0-5.76,2.33,17.38,17.38,0,0,0-4.51,6,17.29,17.29,0,0,0-1.72,7.42c0,2.65.68,4.62,2.06,5.9a7.24,7.24,0,0,0,5.13,1.92,8.71,8.71,0,0,0,6.32-2.5,17.07,17.07,0,0,0,3.84-5.42,13.66,13.66,0,0,0,1.27-3.79C214.75,22.13,214.64,21.89,214.41,21.89ZM201.24,16.8a11.1,11.1,0,0,1,2.8-2.88,6,6,0,0,1,3.51-1.2,3.8,3.8,0,0,1,1.85.43,1.32,1.32,0,0,1,.79,1.2c0,.51-.55,1.17-1.66,2a19.75,19.75,0,0,1-4.1,2.21,17.25,17.25,0,0,1-4.66,1.25A10.05,10.05,0,0,1,201.24,16.8Z"/></g>
						</g>
					</svg>
				</div>
			</div>
			<source-page :tmpl="svgtext1"></source-page>
	    </div>

	    <div class="demo-pages">
			<h3>描边动画-案例2</h3>
			<div class="show-page">
				<div class="demo-btn-page">
					<svg id="show-text" width="100%" height="200">
						<symbol id="s-text">
							<text id="a" x="50%" y="50%">XinUI</text>
						</symbol>
						<use xlink:href="#s-text" class="texts"></use>
						<use xlink:href="#s-text" class="texts"></use>
						<use xlink:href="#s-text" class="texts"></use>
					</svg>
				</div>
			</div>
			<source-page :tmpl="svgtext2"></source-page>
		</div>
		
		<div class="demo-pages">
			<h3>描边动画-案例3</h3>
			<div class="show-page">
				<div class="demo-btn-page">
					<svg width="100%" height="200" id="cool-btn">
						<g transform="translate(20 20)">
							<rect rx="2"  width="200" height="80" stroke="#495397" fill="none" stroke-width="4"></rect>
							<rect class="rect" rx="2"  width="200" height="80" stroke="#fff" fill="none" stroke-width="4"></rect>
						</g>
					</svg>
				</div>
			</div>
		</div>

		<div class="demo-pages">
			<h3>路径动画</h3>
			<div class="show-page">
				<div class="demo-btn-page">
					<svg width="100%" height="200" id="pathanimation">
						<path d="M0 80 Q 70 10, 140 70 T 280 70" stroke="#000" stroke-width="1" fill="none" ></path>
						<circle cx="0" cy="0" r="6" fill="red"></circle>
					</svg>
				</div>
			</div>
		</div>
				
	</div>
</template>

<script>

export default{
	data(){
		return {
			svgtext1:{
				tips:'由stroke描边的并且fill=none的svg元素，都可实现描边动画'
			},
			svgtext2:{
				tips:'拷贝三个一样的text，然后利用stroke-dasharry第二个值，虚线间隔配合stroke-dashoffset负值只显示一部分实现'
			}
		}
	},
	mounted(){
		let paths = [...document.querySelectorAll('#sign-name path')]
		paths.forEach(el=>{
			let iLen = el.getTotalLength()
			el.setAttribute('stroke-dasharray',iLen)
			el.setAttribute('stroke-dashoffset',iLen)
		})
		setTimeout(_=>{
			paths.forEach(el=>{
				el.style.transition = '1s'
				el.setAttribute('stroke-dashoffset',0)
			})
		},1000)
	}
}
</script>

<style lang="scss">
#svg-demo-page{
	.texts{
		stroke:#7928a1;
		stroke-width:4px;
		font-size: 100px;
		text-anchor:middle;
		fill:none;
		stroke-dasharray:0 400;
		stroke-dashoffset:0;
		animation:stroke 1s forwards linear;
	}
	.texts:nth-of-type(2){
		stroke:#007faa;
		stroke-dasharray:0 400;
		stroke-dashoffset:0;
		animation:stroke2 1s forwards linear;
	}
	.texts:nth-of-type(3){
		stroke:#5e6d82;
		stroke-dasharray:0 400;
		stroke-dashoffset:0;
		animation:stroke3 1s forwards linear;
	}
}
@keyframes stroke {
  100% {
    stroke-dasharray:140 400;
	stroke-dashoffset:0;
  }
}

@keyframes stroke2 {
  100% {
    stroke-dasharray:140 400;
	stroke-dashoffset:-140;
  }
}

@keyframes stroke3 {
  100% {
    stroke-dasharray:110 500;
	stroke-dashoffset:-280;
  }
}

#pathanimation{
	circle{
		offset-path: path('M0 80 Q 70 10, 140 70 T 280 70'); 
		offset-distance: 0%;
		animation: red-ball 2s linear alternate infinite;
	}
}
@keyframes red-ball { 
	from { offset-distance: 0%; } 
	to { offset-distance: 100%; } 
}

// 
#cool-btn{
	background: #000;
	.rect{
		stroke-dasharray:560 20;
		stroke-dashoffset:560;
		animation:moverect 3s linear infinite;
	}
}
@keyframes moverect{
	from {stroke-dashoffset:560; } 
	to { stroke-dashoffset:0; } 
}
</style>